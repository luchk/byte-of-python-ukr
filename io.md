# Вхід і вихід {#io}

Бувають ситуації, коли ваша програма повинна взаємодіяти з користувачем. Наприклад, ви хочете взяти введення від користувача і потім роздрукувати результати. Ми можемо досягти цього за допомогою функції 	`input ()` та функції `print` відповідно.

Для виведення ми також можемо використовувати різні методи класу `str` (string). Наприклад, ви можете використовувати метод `rjust`, щоб отримати рядок, який має визначену довжину. Використаєй  `help(str)` для отримання більш докладної інформації.

Іншим поширеним типом вводу/виводу є робота з файлами. Можливість створення, читання і запису файлів має важливе значення для багатьох програм, і ми розглянемо цей аспект в цьому розділі.

## Введення від користувача

Зберегти цю програму як io_input.py`:

<pre><code class="lang-python">{% include "./programs/io_input.py" %}</code></pre>

Вивід:

<pre><code>{% include "./programs/io_input.txt" %}</code></pre>

** Як Це Працює**

Ми використовуємо функцію 'нарізки' для реверсу (відображання у зворотньому порядку) тексту. Ми вже бачили, як ми можемо зробити [зрізи з послідовностей](./data_structures.md#sequence), використовуючи код `seq[a:b]`, починаючи з позиції `a` до позиції `b`. Ми також можемо надати третій аргумент, який визначає _крок_, за допомогою якого виконується зріз. Крок за замовчуванням рівпний `1`, через який він повертає безперервну частину тексту. Даючи негативний крок, тобто `-1`, функція поверне текст у зворотному порядку.

Функція `input()` приймає рядок в якості аргументу і виводить його користувачеві. Потім вона чекає користувача, який повинен щось ввести і натисніть клавішу повернення. Після того, як користувач ввів і натиснув клавішу для поверення (зазвичай це клавіша `Enter`), функція `input()` поверне введений користувачем текст.

Ми беремо цей текст і перевертаємо його. Якщо вихідний текст і зворотний текст рівні, то текст є [паліндромом](http://en.wiktionary.org/wiki/palindrome).

## Вправа домашнє завдання # 

Перевірка того, чи є текст паліндромом, також повинна ігнорувати розділові знаки, прогалини та регістр. Наприклад: "Rise to vote, sir."- це теж паліндром, але наша нинішня програма так не думає. Чи можете ви поліпшити вищевказану програму, щоб розпізнати цей паліндром?

Якщо вам потрібен натяк, ідея така...[^1]

## Файли

Ви можете відкривати та використовувати файли для читання або запису, створюючи об'єкт класу `file` і використовуючи його методи `read`, `readline` або `write` для читання чи запису в файл. Можливість читання або запису в файл залежить від режиму, зазначеного для відкриття файлу. Потім, нарешті, коли ви закінчите роботу з файлом, ви називаєте метод `close`, щоб повідомити Python, що ми закінчили використовувати файл.

Приклад (зберегти як `io_using_file.py`):

<pre><code class="lang-python">{% include "./programs/io_using_file.py" %}</code></pre>

Вивід:

<pre><code>{% include "./programs/io_using_file.txt" %}</code></pre>

** Як Це Працює**

Зверніть увагу, що ми можемо створити новий об'єкт file просто за допомогою методу `open`.  Ми відкриваємо (або створюємо його, якщо він ще не існує) цей файл, використовуючи вбудовану функцію `open` і вказавши ім'я файлу і режим, в якому ми хочемо відкрити файл. Можливі режими: читання (`'r'`), запису (`'w'`) або додавання (`'a'`). Ми також можемо вказати, чи читаємо ми, пишемо або додаємо в текстовому режимі (`'t'`) або двійковому режимі (`'b'`). Насправді доступно ще багато режимів, і `help(open)` дасть вам більш детальну інформацію про них. За замовчуванням `open()` розглядає файл як 'текстовий файл` і відкриває його в режимі 'читання'.

У нашому прикладі ми спочатку відкриваємо/створюємо файл в режимі запису тексту і використовуємо метод `write` об'єкта file для запису нашої рядковій змінній `poem` в файл, а потім ми, нарешті, закриваємо файл  методом `close`.

Потім ми знову відкриваємо той самий файл для читання. Нам не потрібно вказувати режим, тому що "читання текстового файлу" - це режим за замовчуванням. Ми читаємо в кожнен рядок файлу, використовуючи метод `readline` в циклі. Цей метод повертає повний рядок, включаючи символ нового рядка в кінці рядка. Коли повертається рядок _empty_ (пустий), це означає, що ми досягли кінця файлу і  ми "виходимо" ('break') з циклу.

Зрештою, ми, закриваємо файл.

Ми можемо бачити з нашого висновку `readline`, що ця програма дійсно написала і прочитала ваш ноий файл `poem.txt`.

## Pickle

Python надає стандартний модуль під назвою `pickle`, який можна використовувати для зберігання простих об'єктів Python у файл, а потім отримати його. Це називається *постійне* (довготривале) збереженням об'єкта.

Приклад (зберегти як `io_pickle.py`):

<pre><code class="lang-python">{% include "./programs/io_pickle.py" %}</code></pre>

Вивід:

<pre><code>{% include "./programs/io_pickle.txt" %}</code></pre>

** Як Це Працює**

Щоб зберегти об'єкт у файлі, ми повинні спочатку `відкрити`  (`open`) файл в 'wb' режимі (__write binary__), а потім викликати функцію `dump` модуля `pickle`. Цей процес називається _pickling_.

Потім ми витягуємо об'єкт за допомогою функції `load` модуля `pickle`, який повертає об'єкт. Цей процес називається _unpickling_.

## Unicode

До цих пір, коли ми писали і використовували рядки або читання і запис у файл, ми використовували тільки прості англійські символи.  Як англійські, так і неанглійські символи можуть бути представлені в Unicode (див. статті в кінці цього розділу для отримання додаткової інформації), а Python 3 за замовчуванням зберігає рядкові змінні (подумайте про все, що ми написали, використовуючи одинарні, подвійні або потрійні лапки) в Unicode.

> Примітка: Якщо ви використовуєте Python 2, і ви хочемо мати можливість читати і писати на інших мовах, вам потрібно використовувати тип `unicode`, і все це починається з символу `u`, наприклад `u"hello world"`

```python
>>> "hello world"
'hello world'
>>> type("hello world")
<class 'str'>
>>> u"hello world"
'hello world'
>>> type(u"hello world")
<class 'str'>
```

Коли дані відправляються через Інтернет, нам потрібно відправити їх в байтах... щось, що ваш комп'ютер легко розуміє.  Правила для перетворення Юнікоду (який є тим, що Python використовує, коли він зберігає рядок) в байти, називається кодуванням.  Популярним кодування для використання є UTF-8.  Ми можемо читати і писати в UTF-8, використовуючи простий аргумент ключового слова в нашій функції "open".

<pre><code class="lang-python">{% include "./programs/io_unicode.py" %}</code></pre>

** Як Це Працює**

Ми використовуємо `io.open`, а потім використовуємо аргумент `encoding` в першому операторі open для кодування повідомлення, а потім знову в другому операторі open при декодуванні повідомлення.  Зверніть увагу, що кодування в операторі open слід використовувати тільки в текстовому режимі.

Всякий раз, коли ми пишемо програми, яка використовує літерали Unicode (поставивши `u` перед рядком, як ми використовували вище, ми повинні переконатися, що Python знає, що наша програма використовує UTF-8, і для цього ми повинні поставити коментар `# encoding=utf-8` у верхній частині нашої програми.

Ви повинні дізнатися більше про цю тему, прочитавши:


- ["Абсолютний мінімум кожен розробник програмного забезпечення повинен знати про Unicode і наборах символів"] (http://www.joelonsoftware.com/articles/Unicode.html) 
- [Python Unicode Howto](http://docs.python.org/3/howto/unicode.html)
- [Прагматичний Unicode talk Nat Batchelder](http://nedbatchelder.com/text/unipain.html)

## Резюме

Ми обговорили різні типи вводу/виводу, обробку файлів, модуль pickle і Unicode.

Далі ми розглянемо поняття винятків.

---

[^1]: Використовуйте кортеж (ви можете знайти список _всії_ [розділових знаків тут](http://grammar.ccc.commnet.edu/grammar/marks/marks.htm)) щоб утримати всі заборонені символи, використовуйте тест членства, щоб визначити, чи повинен символ бути видалений або немає, тобто forbidden = (`!`,`?`,`.` ,...).